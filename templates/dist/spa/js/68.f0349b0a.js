(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[68],{"2a0e":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{style:{width:t.width,height:t.height}},[a("q-btn",[t._v("111")]),a("bar-chart")],1)},s=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{staticClass:"shadow-24"},[a("q-card-section",{staticClass:"text-h6"},[a("q-btn",{staticClass:"float-right",attrs:{icon:"download",flat:"",dense:""},on:{click:t.SaveImage}},[a("q-tooltip",[t._v("Download PNG")])],1)],1),a("q-card-section",[a("div",{ref:"barchart",style:{height:t.height},attrs:{id:"barChart"}})]),a("q-resize-observer",{on:{resize:t.onResize}})],1)],1)},i=[],o=a("a0ba"),c={name:"BarChart",data(){return{height:"",model:!1,options:{legend:{bottom:10},tooltip:{},dataset:{source:[["product","2015","2016","2017","2018"],["Matcha Latte",43.3,85.8,93.7,77.6],["Milk Tea",83.1,73.4,55.1,36.1],["Cheese Cocoa",86.4,65.2,82.5,46.2],["Walnut Brownie",72.4,53.9,39.1,53.3],["Walnut Brownie",72.4,53.9,39.1,53.3],["Walnut Brownie",72.4,53.9,39.1,53.3],["Walnut Brownie",72.4,53.9,39.1,53.3],["Walnut Brownie",72.4,53.9,39.1,53.3],["Walnut Brownie",72.4,53.9,39.1,53.3]]},grid:{left:"3%",right:"4%",bottom:"20%",top:"5%",containLabel:!0},xAxis:{type:"category"},yAxis:{},series:[{type:"bar"},{type:"bar"},{type:"bar"},{type:"bar"}]},bar_chart:null}},mounted(){var t=this;t.barchartdata(),t.$q.platform.is.electron?t.height=String(t.$q.screen.height-260)+"px":t.height=t.$q.screen.height-260+"px"},watch:{"$q.dark.isActive":function(){this.init()}},methods:{barchartdata(){var t=this,e=o["a"].getInstance().get().barchart;e.toArray().then((e=>{console.log("0000",e,t.options.dataset.source);for(var a=0;a<e[0].xAxis.length;a++)console.log(e[0].xAxis[a],a-1),t.options.dataset.source[0][a+1]=e[0].xAxis[a];for(var r=0;r<9;r++)t.options.dataset.source[r+1][0]=e[0].dataset[r];t.init()}))},SaveImage(){const t=this.bar_chart.getDataURL(),e=document.createElement("a");document.body.appendChild(e),e.href=t,e.target="_self",e.download="BarChart.png",e.click()},init(){const t=document.getElementById("barChart");echarts.dispose(t);const e=this.model?"dark":"light";this.bar_chart=echarts.init(t,e),this.bar_chart.setOption(this.options)},onResize(){this.bar_chart&&this.bar_chart.resize()}}},h=c,l=a("42e1"),d=a("f09f"),u=a("a370"),g=a("9c40"),p=a("05c0"),b=a("3980"),m=a("eebe"),f=a.n(m),v=Object(l["a"])(h,n,i,!1,null,"2abc982a",null),x=v.exports;f()(v,"components",{QCard:d["a"],QCardSection:u["a"],QBtn:g["a"],QTooltip:p["a"],QResizeObserver:b["a"]});var w=a("18d6"),_=a("3004"),q={name:"barchart",components:{BarChart:x},data(){return{pathname:"asn/detail/?asn_status=5&ordering=-id&max-page:10000",height:"",width:"100%"}},mounted(){var t=this;t.getData(),t.$q.platform.is.electron?t.height=String(t.$q.screen.height)+"px":t.height=t.$q.screen.height+"px"},methods:{getData(){var t=this,e=o["a"].getInstance().get().barchart;w["a"].has("auth")&&Object(_["e"])(t.pathname,{}).then((a=>{if(t.table_list=a.results,console.log(t.table_list),a.count>0){var r=[],s=[],n=0,i=[],o=[];a.results.forEach(((t,e)=>{var a=t.create_time.toString().split("-"),s=a[0]+"-"+a[1],n=t.goods_code;r.push(s),i.push(n)})),r.forEach(((t,e)=>{0===s.length?s.push(t):(s.forEach(((e,a)=>{e===t&&(n=1)})),0===n?(s.push(t),n=0):n=0)})),i.forEach(((t,e)=>{0===o.length?o.push(t):(o.forEach(((e,a)=>{e===t&&(n=1)})),0===n?(o.push(t),n=0):n=0)})),e.bulkDelete([1]),e.add({id:1,dataset:o,xAxis:s,series:[]})}})).catch((e=>{t.$q.notify({message:e.detail,icon:"close",color:"negative"})}))}}},C=q,y=Object(l["a"])(C,r,s,!1,null,null,null);e["default"]=y.exports;f()(y,"components",{QCard:d["a"],QBtn:g["a"]})},a0ba:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var r=a("4dec");const s=new r["a"]("database");s.version(1).stores({test:"id, test",linechart:"id, legend, xAxis, serise",barchart:"id, dataset, xAxis, serise ",piechart:"id, data, value, name"}),s.delete(),s.open();class n{static getInstance(){return new n}get(){return s}}}}]);